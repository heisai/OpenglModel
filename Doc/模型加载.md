

# Assimp 模型导入库

 Assimp 可以加载不同模型的物体，加载后被存储在Assimp的通用数据结构中，最终转换成Opengl能理解的格式。


## Model 模型
    一个模型是由多个Mesh 组成。 model 可以认为是 加载的物体对象（opengl 格式的对象， Assimp中叫做场景）
```cpp
class Model
{
    public:
        Model(string path);
        void Draw(Shader shader);
    private:
        vector<Mesh>meshes;
        string directory;
        // 记载模型
        void LoadModel(string path);
        // 加载节点
        void ProcessNodel(aiNode *node,cosnt aiScene *scenee);
};
```

## 网格 Mesh
 - 代表的是单个的可绘制实体,一个网格至少需要一系列的顶点（位置向量 法向量 纹理坐标），还应该包含用于索引绘制的索引以及纹理形式的材质数据（漫反射/镜面光贴图）。
- Mesh 对象本身包含了渲染所需要的所有相关数据，像是顶点位置、法向量、纹理坐标、面(Face)和物体的材质
- 一个网格包含了多个面。Face代表的是物体的渲染图元(Primitive)（三角形、方形、点）。一个面包含了组成图元的顶点的索引。由于顶点和索引是分开的，使用一个索引缓冲来渲染是非常简单的（见你好，三角形）。
- 一个网格包含了多个面。Face代表的是物体的渲染图元(Primitive)（三角形、方形、点）。一个面包含了组成图元的顶点的索引。由于顶点和索引是分开的，使用一个索引缓冲来渲染是非常简单的（见你好，三角形）。

    我的理解： 网格由一系列 最小可绘制的图元组成。一个图元由一系列顶点纹理组成。
 - 顶点 数据结构
  
__网格:__

>当使用建模工具对物体建模的时候，艺术家通常不会用单个形状创建出整个模型。通常每个模型都由几个子模型/形状组合而成。组合模型的每个单独的形状就叫做一个网格(Mesh)。比如说有一个人形的角色：艺术家通常会将头部、四肢、衣服、武器建模为分开的组件，并将这些网格组合而成的结果表现为最终的模型。一个网格是我们在OpenGL中绘制物体所需的最小单位（顶点数据、索引和材质属性）。一个模型（通常）会包括多个网格
```cpp
    struct Vertex {
    // position
    glm::vec3 Position;
    // normal
    glm::vec3 Normal;
    // texCoords
    glm::vec2 TexCoords;
    // tangent
    glm::vec3 Tangent;
    // bitangent
    glm::vec3 Bitangent;
    //bone indexes which will influence this vertex
    int m_BoneIDs[MAX_BONE_INFLUENCE];
    //weights from each bone
    float m_Weights[MAX_BONE_INFLUENCE];
}; 


这个结构体定义了一个顶点(Vertex)，它包含了一些常见的顶点属性以及一些在骨骼动画中使用的属性。让我来解释每个变量的含义：

1. `Position`：顶点的位置，通常是一个三维向量，用来表示顶点在三维空间中的位置坐标。

2. `Normal`：顶点的法线向量，通常也是一个三维向量，用来表示顶点在表面上的法线方向，用于光照和渲染的计算。

3. `TexCoords`：顶点的纹理坐标，通常是一个二维向量，用来表示顶点在纹理贴图上的坐标位置。

4. `Tangent`：顶点的切线向量，通常也是一个三维向量，用于在法线贴图等情况下计算表面的切线空间。

5. `Bitangent`：顶点的双切线向量，通常也是一个三维向量，用于在法线贴图等情况下计算表面的切线空间。

6. `m_BoneIDs[MAX_BONE_INFLUENCE]`：这是一个数组，存储影响该顶点的骨骼的索引。在骨骼动画中，顶点可以受多个骨骼的影响，这个数组存储了对应的骨骼索引。

7. `m_Weights[MAX_BONE_INFLUENCE]`：这也是一个数组，存储了每个骨骼对该顶点的影响权重。在骨骼动画中，一个顶点通常会受到多个骨骼的影响，这些权重值表示了每个骨骼对顶点的影响程度。

`MAX_BONE_INFLUENCE` 是一个常量，表示一个顶点受影响的最大骨骼数量，通常是一个固定的值，比如4或8，具体取决于应用的需求和性能限制。
```
- 纹理 数据结构
 ```cpp
    struct TexCoords
    {
        int id;
        string type;
    }
```


    通常，当你想停止使用之前绑定的VAO时，会调用glBindVertexArray(0);。这样做可以确保后续的渲染操作不会受之前的VAO状态影响，因为没有VAO处于活动状态
## 网格代码（简单实现）
```cpp
class Mesh
{
    public:
        vector<Vertex> vetices;
        vector<unsigned int>indices;
        vector<TexCoords>textures;
        Mesh(vector<Vertex>vec1,vector<unisnged int>indices,vector<Textrue>textrue)
        {
            this.vetices = vec1;
            this.indices = indices;
            this.textures = textrue;

        }
        vodi Draw(Shader shade);
    private:
    unsigned int VAO, VBO,EBO;
    void SetUpMesh();

}
```